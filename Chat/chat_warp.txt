@name Chat Warp
@inputs Drive:wirelink
@persist WarpVec:vector WarpAng:angle PrevPos:vector X Y Z

#include "Novas-Public-E2s/library/nova_lib"

runOnChat(1)
OLS = owner():lastSaid():lower():explode(" ")
O = owner()

if(chatClk(O)){
    if(OLS[1,string] == "/warp"){
        if(OLS[2,string] == "vec"){
            local V = OLS[3,string]:explode(",")
            local X = V[1,string]:toNumber()
            local Y = V[2,string]:toNumber()
            local Z = V[3,string]:toNumber()
            WarpVec = round(vec(X,Y,Z))
            print(WarpVec)
        }
        if(OLS[4,string]:length() == 0){
            WarpAng = Drive:entity():angles()
            print("owo")
        }
        
        elseif(OLS[4,string]:length() >= 1){
            local V = OLS[3,string]:explode(",")
            local X = V[1,string]:toNumber()
            local Y = V[2,string]:toNumber()
            local Z = V[3,string]:toNumber()
            WarpAng = round(ang(X,Y,Z))
            print(WarpAng)
            print(WarpVec)
        }
    }
}


#If you're not on TSCM this function will crash the e2 
if(clk("jamtest")){
    if(isJammed(WarpVec)){
        printColor(ColPink," [Warp] ",ColOng,"Warp destination jammed, cannot warp.")
    }
}
